name: JavaScript Test
on: [push]

jobs:
  test:
    runs-on: ${{ matrix.os }}
    strategy:
      matrix:
        os: [ubuntu-latest, windows-latest]

    steps:
    - uses: actions/checkout@v4
    
    - name: Setup Node
      uses: actions/setup-node@v4
      with:
        node-version: '20'
    
    - name: Create and run test (Linux)
      if: runner.os == 'Linux'
      run: |
        cat > test.js << 'EOF'
        function sum(a,b){return a+b}
        if(sum(2,3)!==5){console.error("Error");process.exit(1)}
        console.log("Test passed")
        EOF
        node test.js
    
    - name: Create and run test (Windows)
      if: runner.os == 'Windows'
      run: |
        echo "function sum(a,b){return a+b}" > test.js
        echo "if(sum(2,3)!==5){console.error('Error');process.exit(1)}" >> test.js
        echo "console.log('Test passed')" >> test.js
        node test.js
